function getHashValue(o){return location.hash.split("=")[1]}function showHandler(){handler.classList.remove("handler-hidden"),handler.classList.remove("handler-visible")}function showLoading(){loading.classList.remove("loading-hidden"),loading.classList.add("loading-visible")}function showUserDeny(){userDeny.classList.remove("hidden"),userDeny.classList.remove("visible")}function handleError(o){o.error_reason&&(showHandler(),showUserDeny())}function addLeftArrow(){leftArrow.classList.add("arrow-left-visible"),leftArrow.classList.remove("arrow-left-hidden")}function removeLeftArrow(){leftArrow.classList.add("arrow-left-hidden"),leftArrow.classList.remove("arrow-left-visible")}function addRightArrow(){rightArrow.classList.add("arrow-right-visible"),rightArrow.classList.remove("arrow-right-hidden")}function removeRightArrow(){rightArrow.classList.add("arrow-right-hidden"),rightArrow.classList.remove("arrow-right-visible")}function addInstruction(o){instruction[o].classList.add("instruction-visible"),instruction[o].classList.remove("instruction-hidden")}function removeInstruction(o){instruction[o].classList.add("instruction-hidden"),instruction[o].classList.remove("instruction-visible")}function addRotateCursor(){body.classList.add("cursor-rotate"),body.classList.remove("cursor-auto"),body.classList.remove("cursor-write"),body.classList.remove("cursor-rotate-top"),body.classList.remove("cursor-rotate-right"),body.classList.remove("cursor-rotate-bottom"),body.classList.remove("cursor-rotate-left"),body.classList.remove("cursor-translate")}function addRotateTopCursor(){body.classList.add("cursor-rotate-top"),body.classList.remove("cursor-auto"),body.classList.remove("cursor-write"),body.classList.remove("cursor-rotate"),body.classList.remove("cursor-rotate-right"),body.classList.remove("cursor-rotate-bottom"),body.classList.remove("cursor-rotate-left"),body.classList.remove("cursor-translate")}function addRotateRightCursor(){body.classList.add("cursor-rotate-right"),body.classList.remove("cursor-auto"),body.classList.remove("cursor-write"),body.classList.remove("cursor-rotate"),body.classList.remove("cursor-rotate-top"),body.classList.remove("cursor-rotate-bottom"),body.classList.remove("cursor-rotate-left"),body.classList.remove("cursor-translate")}function addRotateBottomCursor(){body.classList.add("cursor-rotate-bottom"),body.classList.remove("cursor-auto"),body.classList.remove("cursor-write"),body.classList.remove("cursor-rotate"),body.classList.remove("cursor-rotate-right"),body.classList.remove("cursor-rotate-top"),body.classList.remove("cursor-rotate-left"),body.classList.remove("cursor-translate")}function addRotateLeftCursor(){body.classList.add("cursor-rotate-left"),body.classList.remove("cursor-auto"),body.classList.remove("cursor-write"),body.classList.remove("cursor-rotate"),body.classList.remove("cursor-rotate-right"),body.classList.remove("cursor-rotate-bottom"),body.classList.remove("cursor-rotate-top"),body.classList.remove("cursor-translate")}function addWriteCursor(){body.classList.add("cursor-write"),body.classList.remove("cursor-auto"),body.classList.remove("cursor-rotate"),body.classList.remove("cursor-rotate-top"),body.classList.remove("cursor-rotate-right"),body.classList.remove("cursor-rotate-bottom"),body.classList.remove("cursor-rotate-left"),body.classList.remove("cursor-translate")}function addAutoCursor(){body.classList.add("cursor-auto"),body.classList.remove("cursor-rotate"),body.classList.remove("cursor-write"),body.classList.remove("cursor-rotate-top"),body.classList.remove("cursor-rotate-right"),body.classList.remove("cursor-rotate-bottom"),body.classList.remove("cursor-rotate-left"),body.classList.remove("cursor-translate")}function addTranslateCursor(){body.classList.add("cursor-translate"),body.classList.remove("cursor-auto"),body.classList.remove("cursor-rotate"),body.classList.remove("cursor-write"),body.classList.remove("cursor-rotate-top"),body.classList.remove("cursor-rotate-right"),body.classList.remove("cursor-rotate-bottom"),body.classList.remove("cursor-rotate-left")}var body=document.getElementsByTagName("body")[0],container=document.getElementById("container"),photoLinks,HUD=document.getElementById("HUD"),userPosition=document.getElementById("user-position"),ping=document.getElementById("ping"),leftArrow=document.getElementById("left-arrow"),rightArrow=document.getElementById("right-arrow"),instruction=document.getElementsByClassName("instruction");instruction[0].style.opacity=.6,instruction[2].style.opacity=.6;var chime=new Audio("sound/chime.mp3"),ambient=new Audio("sound/ambient.mp3"),turnPaper=new Audio("sound/turnpaper.mp3"),dropPaper=new Audio("sound/droppaper.mp3"),pickPaper=new Audio("sound/pickpaper.mp3"),enter=new Audio("sound/enter.mp3"),exit=new Audio("sound/exit.mp3");ambient.loop=!0,ambient.play();var clientid="ee3d6a9081e944af995b4d744878b534",redirectURL="http://pastpresent.local/spring2014-thesis/installation/pastpresent.php",authURL="https://api.instagram.com/oauth/authorize/?client_id="+clientid+"&redirect_uri="+redirectURL+"&response_type=token",instagramLogin=document.querySelector("#connect-link");instagramLogin.href=authURL;var hash=getHashValue("hash");console.log("access token: "+hash);var handler=document.querySelector("#handler"),loading=document.querySelector(".loading-hidden"),userDeny=document.querySelector("#user-deny"),urlParams;(window.onpopstate=function(){var o,t=/\+/g,r=/([^&=]+)=?([^&]*)/g,s=function(o){return decodeURIComponent(o.replace(t," "))},e=window.location.search.substring(1);for(urlParams={};o=r.exec(e);)urlParams[s(o[1])]=s(o[2])})(),handleError(urlParams),$(document).ready(function(){function o(){showHandler(),showLoading();var o="https://api.instagram.com/v1/users/"+r+"/media/recent?count=12&access_token="+hash;$.ajax({url:o,dataType:"jsonp",success:function(o){$.ajax({type:"POST",url:"php/savePhotos.php",dataType:"jsonp",data:o,complete:function(){}}).always(function(o){window.open("./pastpresent.php","_blank"),window.open("","_self"),window.close()})}})}function t(){}t();var r="",s="https://api.instagram.com/v1/users/self/?access_token="+hash;$.ajax({url:s,dataType:"jsonp",success:function(o){r=o.data.id,console.log(o)},complete:function(){o()}})});var url=document.location.href;$(document).ready(function(){var o="",t=url.split("?")[1];$.ajax({type:"GET",url:"php/getPhotoLinks.php",async:!1,dataType:"text",data:t,success:function(t){o=t,photoLinks=jQuery.parseJSON(o),console.log(photoLinks)}})}),instagramLogin.addEventListener("mouseover",function(o){bHUDActive=!0}),instagramLogin.addEventListener("mouseout",function(o){bHUDActive=!1});