function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function guid(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}var socket=require("socket.io"),express=require("express"),http=require("http"),app=express(),server=http.createServer(app),io=socket.listen(server),clients=[];io.sockets.on("connection",function(e){e.emit("init",{userid:e.id,users:clients.length});for(var t=0;t<clients.length;t++)e.emit("init user",{userid:clients[t].id});clients.push(e);e.broadcast.emit("entrance",{message:"A new user has joined!",userid:e.id});e.on("disconnect",function(t){for(var n=0;n<clients.length;n++)e.id===clients[n].id&&clients.splice(n,1);e.broadcast.emit("user disconnect",{message:"A user has disconnected",userid:e.id})});e.on("movement",function(t){e.broadcast.emit("movement",{userid:e.id,lookX:t.lookX,lookY:t.lookY,camX:t.camX,camY:t.camY})})});server.listen(8080);